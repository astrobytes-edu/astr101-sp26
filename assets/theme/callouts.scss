/*-- scss:defaults --*/
// ASTR 101 Callouts
// Design tokens: brand colors from generated file, design decisions from hand-authored file

@import 'tokens_generated';
@import 'design_tokens';

// Override Quarto's callout colors
$callout-color-note: $indigo-light;
$callout-color-tip: $teal-light;
$callout-color-important: $gold-light;
$callout-color-caution: $rose-light;
$callout-color-warning: darken($rose-light, 10%);

/*-- scss:rules --*/
// === CALLOUT BASE ===
.callout {
  border-radius: $radius-md;
  border: 1px solid $border-light;
  background: $surface-light;
  font-size: $callout-font-size !important;
}

.callout .callout-header {
  font-size: $callout-font-size !important;
  font-weight: 650;
}

.callout .callout-body {
  font-size: $callout-font-size !important;
}

.callout .callout-body p {
  font-size: inherit;
}

// === HERO CALLOUT (Start Here prominence) ===
.callout-hero {
  border-left: 6px solid $mauve-light;
  background: rgba($mauve-light, 0.04);
  padding: 1.5rem;
  border-radius: $radius-md;
  margin: 1.5rem 0;
}

.callout-hero .callout-header {
  font-size: $callout-hero-header-size;
  font-weight: 700;
  color: $mauve-light;
  margin-bottom: 0.75rem;
}

.callout-hero .callout-body {
  font-size: $callout-font-size !important;
}

[data-bs-theme="dark"] .callout-hero {
  border-left-color: $mauve-dark;
  background: rgba($mauve-dark, 0.06);
}

[data-bs-theme="dark"] .callout-hero .callout-header {
  color: $mauve-dark;
}

// === STANDARD CALLOUT ICONS (Bootstrap Icons) ===
// Using Bootstrap Icons font with Unicode values for clean, professional look

.callout .callout-icon {
  background-image: none !important;
}

.callout .callout-icon::before {
  font-family: "bootstrap-icons" !important;
  font-style: normal;
  font-weight: normal;
  background-image: none !important;
  margin-right: 0.35em;
  font-size: $callout-icon-size;
}

.callout-note .callout-icon::before {
  content: "\F4C2" !important;  // bi-lightning-charge
}

.callout-tip .callout-icon::before {
  content: "\F47B" !important;  // bi-lightbulb
}

.callout-important .callout-icon::before {
  content: "\F58D" !important;  // bi-stars
}

.callout-caution .callout-icon::before {
  content: "\F33B" !important;  // bi-exclamation-triangle
}

.callout-warning .callout-icon::before {
  content: "\F333" !important;  // bi-exclamation-circle
}

// === CUSTOM CALLOUT TYPES ===
// Mixin for custom callout icon styling
@mixin custom-callout-icon($icon-code) {
  &::before {
    font-family: "bootstrap-icons";
    content: $icon-code;
    margin-right: 0.4em;
  }
}

// Problem - puzzle icon, indigo (structural question)
.callout-problem {
  border-left: 4px solid $indigo-light;
  background-color: rgba($indigo-light, 0.06);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-problem::before {
  font-family: "bootstrap-icons";
  content: "\F4EF  Problem";  // bi-puzzle
  font-weight: 600;
  color: $indigo-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

// Solution - check-circle icon, gold (key result - rare!)
.callout-solution {
  border-left: 4px solid $gold-light;
  background-color: rgba($gold-light, 0.08);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-solution::before {
  font-family: "bootstrap-icons";
  content: "\F26A  Solution";  // bi-check-circle
  font-weight: 600;
  color: $gold-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

// Sanity Check - calculator icon, teal (measurement/verification)
.callout-sanity-check {
  border-left: 4px solid $teal-light;
  background-color: rgba($teal-light, 0.08);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-sanity-check::before {
  font-family: "bootstrap-icons";
  content: "\F1C1  Sanity Check";  // bi-calculator
  font-weight: 600;
  color: $teal-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

// TPS (Think-Pair-Share) - chat-dots icon, indigo (discussion)
.callout-tps {
  border-left: 4px solid $indigo-light;
  background-color: rgba($indigo-light, 0.06);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-tps::before {
  font-family: "bootstrap-icons";
  content: "\F249  Think-Pair-Share";  // bi-chat-dots
  font-weight: 600;
  color: $indigo-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

// Frontier - question-diamond icon, purple (unsolved mysteries)
.callout-frontier {
  border-left: 4px solid $purple-light;
  background: linear-gradient(135deg,
    rgba($purple-light, 0.05) 0%,
    rgba($teal-light, 0.03) 100%);
  padding: 1rem;
  margin: 1.5rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-frontier::before {
  font-family: "bootstrap-icons";
  content: "\F505  Open Questions";  // bi-question-diamond
  font-weight: 600;
  color: $purple-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-frontier {
  border-left-color: $purple-dark;
  background: linear-gradient(135deg,
    rgba($purple-dark, 0.12) 0%,
    rgba($teal-dark, 0.06) 100%);
}

[data-bs-theme="dark"] .callout-frontier::before {
  color: $purple-dark;
}

// ==============================================================
// PEDAGOGICAL CALLOUTS - ASTR 101
// ==============================================================

// Check Yourself - retrieval practice prompt
.callout-check-yourself {
  border-left: 4px solid $teal-light;
  background-color: rgba($teal-light, 0.06);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-check-yourself::before {
  font-family: "bootstrap-icons";
  content: "\F3FE  Check Yourself";  // bi-hand-index
  font-weight: 600;
  color: $teal-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-check-yourself {
  border-left-color: $teal-dark;
  background-color: rgba($teal-dark, 0.08);
}

[data-bs-theme="dark"] .callout-check-yourself::before {
  color: $teal-dark;
}

// Deep Dive - optional advanced content (collapsed by default)
.callout-deep-dive {
  border-left: 4px solid $indigo-light;
  background-color: rgba($indigo-light, 0.04);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

// Default header for non-collapsible Deep Dive
.callout-deep-dive:not(.callout-collapsible-transformed)::before {
  font-family: "bootstrap-icons";
  content: "\F5AB  Deep Dive";  // bi-telescope
  font-weight: 600;
  color: $indigo-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

// Hide ::before when transformed to collapsible
.callout-deep-dive.callout-collapsible-transformed::before {
  display: none !important;
}

// Collapsible structure styling
.callout-deep-dive.callout-collapsible-transformed {
  padding: 0;

  details {
    summary {
      padding: 1rem;
      cursor: pointer;
      font-weight: 600;
      color: $indigo-light;
      font-size: $callout-label-size;
      list-style: none; // Remove default triangle

      &::-webkit-details-marker {
        display: none;
      }

      // Add custom expand/collapse indicator
      &::after {
        content: "\F282"; // bi-chevron-down
        font-family: "bootstrap-icons";
        float: right;
        transition: transform 0.2s ease;
      }

      .callout-icon-custom {
        font-family: "bootstrap-icons";
        margin-right: 0.3em;
      }
    }

    &[open] summary::after {
      transform: rotate(180deg);
    }

    .callout-body-custom {
      padding: 0 1rem 1rem 1rem;
    }
  }
}

[data-bs-theme="dark"] .callout-deep-dive {
  border-left-color: $indigo-dark;
  background-color: rgba($indigo-dark, 0.08);
}

[data-bs-theme="dark"] .callout-deep-dive:not(.callout-collapsible-transformed)::before {
  color: $indigo-dark;
}

[data-bs-theme="dark"] .callout-deep-dive.callout-collapsible-transformed details summary {
  color: $indigo-dark;
}

// Worked Example - step-by-step calculation
.callout-worked-example {
  border-left: 4px solid $indigo-light;
  background-color: rgba($indigo-light, 0.04);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-worked-example::before {
  font-family: "bootstrap-icons";
  content: "\F4C9  Worked Example";  // bi-pencil-square
  font-weight: 600;
  color: $indigo-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-worked-example {
  border-left-color: $indigo-dark;
  background-color: rgba($indigo-dark, 0.08);
}

[data-bs-theme="dark"] .callout-worked-example::before {
  color: $indigo-dark;
}

// Key Insight - core conceptual takeaway
.callout-key-insight {
  border-left: 4px solid $gold-light;
  background-color: rgba($gold-light, 0.06);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-key-insight::before {
  font-family: "bootstrap-icons";
  content: "\F47C  Key Insight";  // bi-lightbulb-fill
  font-weight: 600;
  color: $gold-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-key-insight {
  border-left-color: $gold-dark;
  background-color: rgba($gold-dark, 0.08);
}

[data-bs-theme="dark"] .callout-key-insight::before {
  color: $gold-dark;
}

// Misconception Alert - common error to surface and correct
.callout-misconception {
  border-left: 4px solid $rose-light;
  background-color: rgba($rose-light, 0.06);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-misconception::before {
  font-family: "bootstrap-icons";
  content: "\F32A  Misconception Alert";  // bi-exclamation-diamond
  font-weight: 600;
  color: $rose-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-misconception {
  border-left-color: $rose-dark;
  background-color: rgba($rose-dark, 0.08);
}

[data-bs-theme="dark"] .callout-misconception::before {
  color: $rose-dark;
}

// The More You Know - optional interesting info (collapsed by default)
.callout-the-more-you-know {
  border-left: 4px solid $purple-light;
  background-color: rgba($purple-light, 0.04);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

// Default header for non-collapsible
.callout-the-more-you-know:not(.callout-collapsible-transformed)::before {
  font-family: "bootstrap-icons";
  content: "\F431  The More You Know";  // bi-info-circle
  font-weight: 600;
  color: $purple-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

// Hide ::before when transformed to collapsible
.callout-the-more-you-know.callout-collapsible-transformed::before {
  display: none !important;
}

// Collapsible structure styling
.callout-the-more-you-know.callout-collapsible-transformed {
  padding: 0;

  details {
    summary {
      padding: 1rem;
      cursor: pointer;
      font-weight: 600;
      color: $purple-light;
      font-size: $callout-label-size;
      list-style: none;

      &::-webkit-details-marker {
        display: none;
      }

      &::after {
        content: "\F282"; // bi-chevron-down
        font-family: "bootstrap-icons";
        float: right;
        transition: transform 0.2s ease;
      }

      .callout-icon-custom {
        font-family: "bootstrap-icons";
        margin-right: 0.3em;
      }
    }

    &[open] summary::after {
      transform: rotate(180deg);
    }

    .callout-body-custom {
      padding: 0 1rem 1rem 1rem;
    }
  }
}

[data-bs-theme="dark"] .callout-the-more-you-know {
  border-left-color: $purple-dark;
  background-color: rgba($purple-dark, 0.08);
}

[data-bs-theme="dark"] .callout-the-more-you-know:not(.callout-collapsible-transformed)::before {
  color: $purple-dark;
}

[data-bs-theme="dark"] .callout-the-more-you-know.callout-collapsible-transformed details summary {
  color: $purple-dark;
}

// Why This Matters - motivation and relevance
.callout-why-this-matters {
  border-left: 4px solid $mauve-light;
  background-color: rgba($mauve-light, 0.04);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-why-this-matters::before {
  font-family: "bootstrap-icons";
  content: "\F1DB  Why This Matters";  // bi-bullseye
  font-weight: 600;
  color: $mauve-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-why-this-matters {
  border-left-color: $mauve-dark;
  background-color: rgba($mauve-dark, 0.06);
}

[data-bs-theme="dark"] .callout-why-this-matters::before {
  color: $mauve-dark;
}

// Roadmap - navigation and orientation
.callout-roadmap {
  border-left: 4px solid $slate-light;
  background-color: rgba($slate-light, 0.04);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-roadmap::before {
  font-family: "bootstrap-icons";
  content: "\F5D6  Roadmap";  // bi-signpost-2
  font-weight: 600;
  color: $slate-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-roadmap {
  border-left-color: $slate-dark;
  background-color: rgba($slate-dark, 0.06);
}

[data-bs-theme="dark"] .callout-roadmap::before {
  color: $slate-dark;
}

// Prediction - pre-reading prediction prompt
.callout-prediction {
  border-left: 4px solid $indigo-light;
  background-color: rgba($indigo-light, 0.04);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-prediction::before {
  font-family: "bootstrap-icons";
  content: "\F504  Prediction";  // bi-question-circle
  font-weight: 600;
  color: $indigo-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-prediction {
  border-left-color: $indigo-dark;
  background-color: rgba($indigo-dark, 0.08);
}

[data-bs-theme="dark"] .callout-prediction::before {
  color: $indigo-dark;
}

// Summary - section wrap-up
.callout-summary {
  border-left: 4px solid $slate-light;
  background-color: rgba($slate-light, 0.04);
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0.25rem;
  font-size: $callout-font-size !important;
}

.callout-summary::before {
  font-family: "bootstrap-icons";
  content: "\F233  Summary";  // bi-card-checklist
  font-weight: 600;
  color: $slate-light;
  display: block;
  margin-bottom: 0.5rem;
  font-size: $callout-label-size;
}

[data-bs-theme="dark"] .callout-summary {
  border-left-color: $slate-dark;
  background-color: rgba($slate-dark, 0.06);
}

[data-bs-theme="dark"] .callout-summary::before {
  color: $slate-dark;
}
