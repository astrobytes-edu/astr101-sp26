// =============================================================================
// READABILITY â€” Base typography, measure, and vertical rhythm (RevealJS)
// =============================================================================
//
// This file sets slide-wide defaults to make it *hard* to create unreadable
// or overflow-prone slides. Utilities remain in _typography.scss.

// ---------------------------------------------------------------------------
// Global rhythm
// ---------------------------------------------------------------------------
.reveal {
  line-height: $presentation-line-height;
}

.reveal .slides section {
  // Default spacing for projection: tighter than Quarto HTML pages.
  p { margin: 0.4rem 0 0.7rem 0; }
  ul, ol { margin: 0.4rem 0 0.8rem 1.2rem; }
  li { margin: 0.18rem 0; }

  // Headings: readable, but less likely to shove content into the footer.
  h1, h2, h3, h4 {
    margin: 0 0 0.55rem 0;
    line-height: $leading-tight;
  }

  h2, h3, h4 {
    margin-bottom: 0.45rem;
  }

  // Avoid "mystery whitespace" at slide edges.
  > :first-child { margin-top: 0; }
  > :last-child { margin-bottom: 0; }
}

// ---------------------------------------------------------------------------
// Prose measure (max line length)
// ---------------------------------------------------------------------------
:root {
  --slide-prose-measure: 72ch;
}

// Keep paragraphs readable on wide slides; opt-out per-slide via {.no-measure}.
.reveal .slides section:not(.no-measure) p,
.reveal .slides section:not(.no-measure) blockquote {
  max-width: var(--slide-prose-measure);
}

// In multi-column layouts, allow full column width.
.reveal :is(.columns, .layout-2col, .layout-grid-2, .layout-grid-3, .layout-triad, .layout-callout) p,
.reveal :is(.columns, .layout-2col, .layout-grid-2, .layout-grid-3, .layout-triad, .layout-callout) blockquote {
  max-width: none;
}

// ---------------------------------------------------------------------------
// Math and code guardrails
// ---------------------------------------------------------------------------
.reveal .math.display {
  margin: 0.7rem 0;
}

.reveal :is(.katex, .math, .MathJax, .MathJax_Display) {
  font-size: 1em;
}

// Inline math should not collapse to tiny text in dense slides.
.reveal .math.inline {
  font-size: 1em;
}

.reveal pre {
  max-height: 70vh;
  overflow: auto;
}

// ---------------------------------------------------------------------------
// Density control (opt-in)
// ---------------------------------------------------------------------------
// Add {.compact} to a slide to slightly shrink content while preserving rhythm.
.reveal section.compact {
  font-size: 0.92em;
}

.reveal section.compact .math.display {
  margin: 0.55rem 0;
}
